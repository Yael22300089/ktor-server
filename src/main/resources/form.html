<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <title>Formulario Moderno</title>

    <style>
        body {
          margin: 0;
          min-height: 100vh;
          background-size: cover;
          background-position: center;
          transition: background-image 1s ease-in-out;
          font-family: 'Segoe UI', sans-serif;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .overlay {
          background: rgba(0,0,0,.55);
          position: absolute;
          inset: 0;
        }

        .card {
          position: relative;
          background: white;
          padding: 35px;
          border-radius: 16px;
          width: 420px;
          box-shadow: 0 20px 40px rgba(0,0,0,.25);
          z-index: 2;
        }

        h2 {
          margin-top: 0;
          text-align: center;
        }

        input, button {
          width: 100%;
          padding: 12px;
          margin-bottom: 12px;
          border-radius: 8px;
          border: 1px solid #ccc;
        }

        button {
          background: linear-gradient(135deg,#667eea,#764ba2);
          color: white;
          border: none;
          cursor: pointer;
          font-size: 16px;
        }

        button:hover {
          opacity: .9;
        }

        #mensaje {
          display: none;
          background: #38a169;
          color: white;
          padding: 10px;
          border-radius: 8px;
          margin-bottom: 12px;
          text-align: center;
        }
    </style>
</head>

<body>

<div class="overlay"></div>

<div class="card">
    <h2>Registro</h2>

    <div id="mensaje">âœ… Formulario enviado</div>

    <form id="form" enctype="multipart/form-data">
        <input name="nombre" placeholder="Nombre" required>
        <input name="edad" placeholder="Edad" required>
        <input name="correo" placeholder="Correo" required>
        <input name="telefono" placeholder="TelÃ©fono" required>
        <input type="date" name="fecha" required>

        <input type="file" name="imagenes" multiple accept="image/*">

        <button>Enviar</button>
    </form>
</div>

<script>
    let fondos = [];
    let index = 0;

    // ðŸ”„ cargar imÃ¡genes del servidor
    fetch('/imagenes')
      .then(r => r.json())
      .then(data => {
        fondos = data;
        iniciarCarrusel();
      });

    function iniciarCarrusel() {
      if (!fondos.length) return;
      document.body.style.backgroundImage = `url(${fondos[0]})`;

      setInterval(() => {
        index = (index + 1) % fondos.length;
        document.body.style.backgroundImage = `url(${fondos[index]})`;
      }, 4000);
    }

    // ðŸš€ enviar formulario sin recargar
    document.getElementById("form").addEventListener("submit", async e => {
      e.preventDefault();

      const res = await fetch("/enviar", {
        method: "POST",
        body: new FormData(e.target)
      });

      if (res.ok) {
        document.getElementById("mensaje").style.display = "block";
        e.target.reset();
        setTimeout(() => location.reload(), 1500);
      }
    });
</script>

</body>
</html>
